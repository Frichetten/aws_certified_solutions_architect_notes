# VPC Overview
* Think of a VPC as a logical datacenter in AWS.
* Consists of IGWs (Or Vitrual Private Gateways), Route Tables, Network Access Control Lists, Subnets, and Security Groups
* 1 Subnet = 1 Availability Zone
* Security Groups are Stateful; Network Access Control Lists are Stateless
* No Transitive Peering

# Building our VPC
* When you create a VPC a default Route Table, Network Access Control List (NACL) and a default Security Group
* It won't create any subnets, nor will it create a default internet gateway.
* US-East-1A in your AWS account can be completely different availability zone to US-East-1A in another AWS account. The AZ's are randomized.
* Amazon always reserve 5 IP addresses within your subnets
* You can only have 1 Internet Gateway per VPC
* Security Groups cannot span VPCs

# NAT Instances vs NAT Gateways
## Nat Instances Exam Tips
* When creating a Nat Instance, Disable Source/Destination Check on the Instance
* NAT Instances must be in a public subnet.
* There must be a route out of the private subnet to the NAT instance, in order for this to work.
* The amount of traffic that NAT instances can support depends on the instance size. If you are bottlenecking, increase the instance size.
* You can create high availability using Autoscaling Groups, multiple subnets in different AZs, and a script to automate failover
* Behind a Security Group

## NAT Gateways
* Redundant inside the Availability Zone
* Preferred by the interprise
* Starts at 5Gbps and scales currently to 45Gbps
* No need to patch
* Automatically assigned a public ip address
* Remember to update your route tables
* No need to disable Source/Destination checks
* If you have resources in multiple AZs and they share one NAT Gateway, in the event that the NAT gateway's Availability Zone is down, resources in the other AZs lose internet access. To create an AZ independent architecture, create a NAT gateway in each AZ and configure your routing to ensure that resources use the NAT gateway in the same AZ.

# Network ACLs
* Your VPC automatically comes with a default network ACL, and by default it allows all outbound and inbound traffic
* You can create custom network ACLs. By default, each customer network ACL denies all inbound and outbound traffic until you add rules.
* Each subnet in your VPC must be associated with a network ACL. If you don't explicitly associate a subnet with a network ACL, the subnet is automatically associated with the default network ACL.
* Block IP Addresses using network ACLs not Security Groups
* You can associate a network ACL wiht multiple subnets; however a subnet can be associated with only one network at a time. When you associate a network ACL with a subnet, the previous association is removed.
* Network ACLs contain a numbered list of rules that is evaluated in order, starting with the lowest numbered rule.
* Network ACLs have separate inbound and outbound rules, and each rule can either allow or deny traffic.
* Network ACLs are stateless; responses to allowed inbound traffic are subject to the rules for outbound traffic (and vice versa).

# ELBs and VPCs
* You need a minimum of two public subnets to deploy an internet facing loadbalancer.

# VPC Flow Logs
* You cannot enable VPC flow logs for VPCs that are peered with your VPC unless the peer VPC is in your account
* You cannot tag a flow log
* After you've created a flow log, you cannot change its configuration; for example; you can't associate a different IAM role with the flow log.
* Traffic generated by instances when they contact the Amazon DNS server. If you use your own DNS server, than all traffic to that DNS server is logged. 
* Traffic generated by a Windows instance for Amazon Windows license activation
* Traffic to and from 169.254.169.254 for instance metadata.
* DHCP traffic
* Traffic to the reserved IP address for the default VPC router

# Bastion Host
* A NAT Gatewaay or NAT instance is used to provide internet traffic to EC2 instances in a private subnet
* A Bastion is used to securely administer EC2 Instances ( Using SSH or RDP). Bastions are called jump boxes in Australia
* You cannot use a NAT Gateway as a Bastion Host

# Direct Connect
* Direct Connect directly connects your data center to AWS
* Useful for high throughput workloads
* Or if you need a stable and reliable secure connection

# VPC Endpoints
- Copy description here -
## Two types of Endpoints
* Interface Endpoints
* Gateway Endpoints
## Two Gateway Endpoints
* S3
* DynamoDB